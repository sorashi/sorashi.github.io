<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content='You might think that knowing the number of zeros that suffix the value of $n!$ is useless. And you might be right. At least I haven&rsquo;t thought of any use.
Even though, I want to leave this here, because I found this out while solving something else.
So the problem is:
Given $n$, return the maximum number of zeros, that suffix $n!$. For example for $n=5$, $n! = 15511210043330985984000000$, so the answer would be $6$.
'><title>Number of zeros at the end of a factorial in logarithmic time</title><link rel=canonical href=https://sorashi.github.io/number-of-zeros-at-the-end-of-factorial-in-logarithmic-time/><link rel=me href=https://f.cz/@sorashi><link rel=stylesheet href=/scss/style.min.css><meta property='og:title' content='Number of zeros at the end of a factorial in logarithmic time'><meta property='og:description' content='You might think that knowing the number of zeros that suffix the value of $n!$ is useless. And you might be right. At least I haven&rsquo;t thought of any use.
Even though, I want to leave this here, because I found this out while solving something else.
So the problem is:
Given $n$, return the maximum number of zeros, that suffix $n!$. For example for $n=5$, $n! = 15511210043330985984000000$, so the answer would be $6$.
'><meta property='og:url' content='https://sorashi.github.io/number-of-zeros-at-the-end-of-factorial-in-logarithmic-time/'><meta property='og:site_name' content='Sorashi'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='math'><meta property='article:published_time' content='2020-12-21T00:00:00+00:00'><meta property='article:modified_time' content='2020-12-21T00:00:00+00:00'><meta name=twitter:site content="@iamSorashi"><meta name=twitter:title content="Number of zeros at the end of a factorial in logarithmic time"><meta name=twitter:description content="You might think that knowing the number of zeros that suffix the value of $n!$ is useless. And you might be right. At least I haven&rsquo;t thought of any use.
Even though, I want to leave this here, because I found this out while solving something else.
So the problem is:
Given $n$, return the maximum number of zeros, that suffix $n!$. For example for $n=5$, $n! = 15511210043330985984000000$, so the answer would be $6$.
"></head><body><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.body.dataset.scheme="dark":document.body.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src="https://avatars1.githubusercontent.com/u/6270283?s=460&amp;v=4" width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>ðŸ˜³</span></figure><h1 class=site-name><a href=https://sorashi.github.io/>Sorashi</a></h1><h2 class=site-description>a-are you checking me out?</h2></header><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/about><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About</span></a></li><li><a href=/archives><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://sorashi.github.io/ class=back-home><svg class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span></a></div><article class=main-article><header class=article-header><div class=article-details><h2 class=article-title><a href=/number-of-zeros-at-the-end-of-factorial-in-logarithmic-time/>Number of zeros at the end of a factorial in logarithmic time</a></h2><footer class=article-time><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--published>2020-12-21</time></footer></div></header><section class=article-content><p>You might think that knowing the number of zeros that suffix the value of $n!$
is useless. And you might be right. At least I haven&rsquo;t thought of any use.</p><p>Even though, I want to leave this here, because I found this out while solving
something else.</p><p>So the problem is:</p><p><em>Given $n$, return the maximum number of zeros, that suffix $n!$. For example
for $n=5$, $n! = 15511210043330985984000000$, so the answer would be $6$.</em></p><p>We could compute the value of the factorial and count the number of zeros. We&rsquo;d
get the result this way in $\mathcal O(n + \log (n!))$ time (compute $n!$ plus
count the zeros), <a class=link href=https://math.stackexchange.com/questions/2152256/big-o-notation-on-the-log-factorial target=_blank rel=noopener>which is</a> $\mathcal O(n\log (n))$.</p><p>Let&rsquo;s use the following fact</p><p><em>The number of zeros at the end of a number $n$ is equivalent to the number of
times $n$ can be evenly divided by ten.</em></p><p>So an equivalent problem to the one given above is: How many 10s can you factor
out of $n!$.</p><p>We could scan the numbers 1 through $n$ and find the number of 10s that get made
when computing the factorial. For example, $2\cdot 5$ makes a ten, $10$ makes a
ten, $15\cdot 4=60$ makes a ten, $20$ makes a ten, $25*8=200$ makes two tens!
That&rsquo;s 6 tens in total, the answer to the example of $25!$.</p><p>A pattern appears here. For each number $x$ in $(1\dots n)$, sum the number of
times we can divide $x$ by 5, and that&rsquo;s our result.</p><p>$$\sum_{x=1}^n \max\left(\left\{k\in\mathbb N^+\mid x\equiv 0\ (\text{mod } 5^k)\right\}\cup {0}\right)$$</p><p>Why is that? Well, a ten is made from 2 and 5. Informally, there is so many 2s
to pair with 5s, that <strong>we can just count the 5s</strong>. 5 can be paired with 2. 10 can be paired with the two in 4. The five in 15 can be paired with the second two in 4. 20 can be paired with a two in 8. And so on.</p><p>More formally, let&rsquo;s define</p><p>$$g(n, a):= \sum_{x=1}^n \max\left(\left\{k\in\mathbb N^+\mid x\equiv 0\ (\text{mod } a^k)\right\}\cup {0}\right),,$$</p><p>then for a given large $n$, it holds $g(n, 5)\leq g(n, 2)$, which can be easily
seen. Generally $a>b \iff g(n,a)\leq g(n,b)$.</p><p>Now how do we compute $g(n, 5)$ efficiently? A straight-forward way is to go through each number and try each $k$, that would be $\mathcal O(n^2)$. With a more clever approach, I&rsquo;m sure this can be made $\mathcal O(n)$.</p><p>But let&rsquo;s think even smaller.</p><p>I propose</p><p>$$g(n, a) = \sum_{i=1}^{\lfloor \log_a n \rfloor}\lfloor \frac{n}{a^i}\rfloor,.$$</p><p>Why does this count the number of times we find the factor $a$ in the numbers
from $1$ to $n$? Well, it takes into account all powers of $a$. First it divides
by $a^1$, which finds how many $a$&rsquo;s there are in $n$. That includes even
numbers which contain $a\cdot a$ as a factor, or $a\cdot a \cdot a$, and so on.
For each of these, it adds one to the sum.</p><p>Next, we divide $n$ by $a^2$. This finds the number of times $a\cdot a$ appear
as a factor. It counts when $a\cdot a$ or $a\cdot a\cdot a\cdots$ appear, but
not when $a$ appears alone. For each of these it adds one to the sum. Which is
correct &ndash; we already added one for the second $a$ that appears in $a\cdot a$.</p><p>This continues while $a^i\leq n$. Let&rsquo;s see an example. For $g(25, 5)$, we get</p><p>$$ \lfloor\frac{25}{5}\rfloor+\lfloor\frac{25}{25}\rfloor=5+1=6,. $$</p><p>The first division counts a single five in $5, 10, 15, 20$ and $25$. The second division counts the second five in $25$.</p><p>Our original problem is the result of $g(n,5)$. This runs in $\mathcal O(\log
n)$ time. Nice.</p><p>Now what&rsquo;s interesting and is just my unproven funny informal small conjecture (which I plan to think about later)</p><p>$$\sum_{i=1}^{\lfloor \log_a n \rfloor}\lfloor \frac{n}{a^i}\rfloor=\lfloor \frac{n}{a-1}\rfloor -\xi(n, a),,$$</p><p>where $\xi\colon (\mathbb N\times \mathbb N)\to \mathbb N$ is an unknown function, with an average
value of around 5, which is not a lot. That means we have a
good approximation for $g(n,a)$. That one is for the engineers. Bye~</p><p><img src=fig1.svg alt="Plot of xi function"></p></section><footer class=article-footer><section class=article-tags><a href=/tags/math/>Math</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><aside class=related-contents--wrapper></aside><div class=disqus-container><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//Sorashi.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2018 -
2025 Sorashi</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>